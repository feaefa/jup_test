"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadProgramAccount = void 0;
const tslib_1 = require("tslib");
/**
 * Loads the account info of an account owned by a program.
 * @param connection
 * @param address
 * @param programId
 * @returns
 */
const loadProgramAccount = (connection, address, programId) => (0, tslib_1.__awaiter)(void 0, void 0, void 0, function* () {
    const accountInfo = yield connection.getAccountInfo(address);
    if (accountInfo === null) {
        throw new Error("Failed to find account");
    }
    if (!accountInfo.owner.equals(programId)) {
        throw new Error(`Invalid owner: expected ${programId.toBase58()}, found ${accountInfo.owner.toBase58()}`);
    }
    return Buffer.from(accountInfo.data);
});
exports.loadProgramAccount = loadProgramAccount;
//# sourceMappingURL=account.js.map